<script>
$(function() {
	$("#dEdit_planetModeTabs").tabs();
});
</script>
<table>
	<tr class="dEdit_label">
		<td>
			<span class="dEdit_title">DirectEdit</span>
			<span style="width: 20px"></span>
			<span class="dEdit_version" data-bind="text: dEdit.version"></span>
		</td>
	</tr>
	<tr id="dEdit_planetSelect">
		<td>
			<table>
				<tr>
					<td>
						<select data-bind="options: dEdit.listPlanets, optionsText: function(item) { return item.name; }, value: dEdit.selectedPlanet">
						</select>
					</td>
					<td>
						<button onclick="dEdit.readSelectedPlanet()">
							READ
						</button>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr data-bind="visible: dEdit.hasPlanet">
		<td>
			<div id="dEdit_planetModeTabs">
				<ul>
					<li><a href="#dEdit_planetModeTab_planet">Planet</a></li>
					<li><a href="#dEdit_planetModeTab_brush">CSG</a></li>
					<li><a href="#dEdit_planetModeTab_metal">Metal</a></li>
					<li><a href="#dEdit_planetModeTab_spawn">Spawns</a></li>
					<li><a href="#dEdit_planetModeTab_tools">Tools</a></li>
				</ul>
				<div id="dEdit_planetModeTab_planet" class="dEdit_planetTable">
					<table>
						<tr>
							<td>Name</td>
							<td><input type="text" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.name"></input></td>
						</tr>
						<tr>
							<td>Mass</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.mass"></input></td>
						</tr>
						<tr>
							<td>Position<span class="dEdit_xyz">(x)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.position_x"></input></td>
						</tr>
						<tr>
							<td><span class="dEdit_xyz">(y)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.position_y"></input></td>
						</tr>
						<tr>
							<td>Velocity<span class="dEdit_xyz">(x)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.velocity_x"></input></td>
						</tr>
						<tr>
							<td><span class="dEdit_xyz">(y)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.velocity_y"></input></td>
						</tr>
						<tr>
							<td>Engines to Launch</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.required_thrust_to_move"></input></td>
						</tr>
						<tr>
							<td>Seed</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.seed"></input></td>
						</tr>
						<tr>
							<td>Radius</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.radius"></input></td>
						</tr>
						<tr>
							<td>Biome</td>
							<td><select data-bind="options: biomes, value: dEdit.currentSpec.planet.biome"></select></td>
						</tr>
						<tr>
							<td>Height Range</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.heightRange"></input></td>
						</tr>
						<tr>
							<td>Water Coverage</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.waterHeight"></input></td>
						</tr>
						<tr>
							<td>Water Depth</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.waterDepth"></input></td>
						</tr>
						<tr>
							<td>Temperature</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.temperature"></input></td>
						</tr>
						<tr>
							<td>Metal Density</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.metalDensity"></input></td>
						</tr>
						<tr>
							<td>Metal Clusters</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.metalClusters"></input></td>
						</tr>
						<tr>
							<td>Starting planet</td>
							<td><input type="checkbox" data-bind="checked: dEdit.currentSpec.starting_planet"></input></td>
						</tr>
						<tr>
							<td>LZ Per Army</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.landingZonesPerArmy"></input></td>
						</tr>
						<tr>
							<td>LZ Size</td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentSpec.planet.landingZoneSize"></input></td>
						</tr>
						<tr>
							<td>Symmetry Type</td>
							<td><select data-bind="options: symmetryTypes, value: dEdit.currentSpec.planet.symmetryType"></select></td>
						</tr>
						<tr data-bind="visible: dEdit.currentSpec.planet.symmetryType() === 'terrain and CSG'">
							<td colspan="2" class="dEdit_warn">WARNING: paired brushes will be unlinked when writing planet</td>
						</tr>
						<tr>
							<td>N/S Mirrored Metal</td>
							<td><input type="checkbox" data-bind="checked: dEdit.currentSpec.planet.symmetricalMetal"></input></td>
						</tr>
						<tr>
							<td>N/S Mirrored LZ</td>
							<td><input type="checkbox" data-bind="checked: dEdit.currentSpec.planet.symmetricalStarts"></input></td>
						</tr>
					</table>
				</div>
				<div id="dEdit_planetModeTab_brush" class="dEdit_planetTable">
					<div class="dEdit_note" data-bind="visible: dEdit.currentSpec.brushList.isEmpty">No custom CSG (default terrain generation)</div>
					<table data-bind="foreach: dEdit.currentSpec.brushList.items">
						<tr class="dEdit_listRow" data-bind="click: $root.dEdit.currentSpec.brushList.selectionManager.handleClickEvent, css: { dEdit_listRowSelected: isSelected() }">
							<td class="dEdit_specCell" data-bind="text: /([^/.]+)(?=\.)/.exec(spec())[0]"></td>
							<td class="dEdit_charCell"><div class="dEdit_charPlusMinus" data-bind="text: $root.dEdit.opChar(op())"></div></td>
							<td class="dEdit_charCell" data-bind="text: !!mirrored() ? '%' : ' '"></td>
							<td class="dEdit_charCell" data-bind="text: !!pathable() ? 'P' : ' '"></td>
							<td class="dEdit_charCell" data-bind="text: !!mergeable() ? 'M' : ' '"></td>
							<td class="dEdit_charCell" data-bind="text: !!no_features() ? 'N' : ' '"></td>
						</tr>
					</table>
				</div>
				<div id="dEdit_planetModeTab_metal" class="dEdit_planetTable">
					<div class="dEdit_note" data-bind="visible: dEdit.currentSpec.metalList.isEmpty">No custom metal spots (random generation)</div>
					<table data-bind="foreach: dEdit.currentSpec.metalList.items">
						<tr class="dEdit_listRow" data-bind="click: $root.dEdit.currentSpec.metalList.selectionManager.handleClickEvent, css: { dEdit_listRowSelected: isSelected() }">
							<td data-bind="text: location[0]().toFixed(3)"></td>
							<td data-bind="text: location[1]().toFixed(3)"></td>
							<td data-bind="text: location[2]().toFixed(3)"></td>
						</tr>
					</table>
				</div>
				<div id="dEdit_planetModeTab_spawn" class="dEdit_planetTable">
					<div class="dEdit_note" data-bind="visible: dEdit.currentSpec.spawnList.isEmpty">No custom landing zones (random generation)</div>
					<table data-bind="foreach: dEdit.currentSpec.spawnList.items">
						<tr class="dEdit_listRow" data-bind="click: $root.dEdit.currentSpec.spawnList.selectionManager.handleClickEvent, css: { dEdit_listRowSelected: isSelected() }">
							<td data-bind="text: location[0]().toFixed(3)"></td>
							<td data-bind="text: location[1]().toFixed(3)"></td>
							<td data-bind="text: location[2]().toFixed(3)"></td>
							<td data-bind="text: min"></td>
							<td data-bind="text: max"></td>
						</tr>
					</table>
				</div>
				<div id="dEdit_planetModeTab_tools" class="dEdit_planetTable">
					<select data-bind="options: dEdit.planetTools.tools, optionsText: function(item) { return item.label; }, value: dEdit.planetTools.selectedType"></select>
					<div class="dEdit_note" data-bind="text: dEdit.planetTools.selectedType().author"></div>
					<div class="dEdit_note" data-bind="text: dEdit.planetTools.selectedType().description"></div>
					<div class="dEdit_warn" data-bind="text: dEdit.planetTools.selectedType().warning"></div>
						<!-- TODO: avoid hard-coded fields-->
					<table>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_angle">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_angle"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_angle"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_add">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_add"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_add"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_mult">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_add"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_add"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_mean">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_mean"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_mean"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_sd">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_sd"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_sd"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_min">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_min"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_min"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.num_max">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.num_max"></span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.num_max"></input></td>
						</tr>
						
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_direction">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.vec_direction"></span><span class="dEdit_xyz">(x)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_direction[0]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_direction">
							<td><span class="dEdit_xyz">(y)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_direction[1]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_direction">
							<td><span class="dEdit_xyz">(z)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_direction[2]"></input></td>
						</tr>
						
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_scaling">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.vec_scaling"></span><span class="dEdit_xyz">(x)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_scaling[0]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_scaling">
							<td><span class="dEdit_xyz">(y)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_scaling[1]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_scaling">
							<td><span class="dEdit_xyz">(z)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_scaling[2]"></input></td>
						</tr>
						
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_translate">
							<td><span data-bind="text: dEdit.planetTools.selectedType().activeFields.vec_translate"></span><span class="dEdit_xyz">(x)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_translate[0]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_translate">
							<td><span class="dEdit_xyz">(y)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_translate[1]"></input></td>
						</tr>
						<tr data-bind="visible: dEdit.planetTools.selectedType().activeFields.vec_translate">
							<td><span class="dEdit_xyz">(z)</span></td>
							<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.staticVars.toolFields.vec_translate[2]"></input></td>
						</tr>
					</table>
					
					<table>
						<tr data-bind="visible: dEdit.planetTools.isReady">
							<td><button style="width: 100%" data-bind="click: dEdit.applyPlanetTool">Apply</button></td>
						</tr>
						<tr data-bind="visible: !dEdit.planetTools.isReady()">
							<td colspan="2" class="dEdit_note">
								The selected operation can be applied once all required fields are filled.
							</td>
						</tr>
					</table>
				
				</div>
			</div>
		</td>
	</tr>
	<tr>
		<td>
			<button id="dEdit_planetCommit_write" onclick="dEdit.writePlanet()">
				WRITE
			</button>
		</td>
	</tr>
</table>