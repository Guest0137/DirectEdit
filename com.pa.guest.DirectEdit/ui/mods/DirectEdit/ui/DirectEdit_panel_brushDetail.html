<script>
$(function() {
	$("#dEdit_brushDetailTabs").tabs();
});
</script>
<div id="dEdit_brushDetail_wrapper">
	<button data-bind="click: dEdit.brushDetail.hide">Hide</button>
	<div id="dEdit_brushDetailTabs">
		<ul>
			<li><a href="#dEdit_brushDetailTab_prop">Properties</a></li>
			<li><a href="#dEdit_brushDetailTab_functions">Functions</a></li>
		</ul>
		<div id="dEdit_brushDetailTab_prop">
			<div class="dEdit_note" data-bind="visible: dEdit.brushDetail.selected.brushes().length > 1">
				<span data-bind="text: dEdit.brushDetail.selected.brushes().length"></span> brushes selected. Changes will be applied to all selected brushes.
			</div>
			<table data-bind="visible: dEdit.brushDetail.selected.brushes().length === 1">
				<tr>
					<td>Model</td>
					<td><input type="text" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().spec"></input></td>
				</tr>
				<tr>
					<td>Projection Type</td>
					<td>
						<select data-bind="value: dEdit.brushDetail.currentBrush().proj">
							<option value="BP_None">None</option>
							<option value="BP_Bend">Bend</option>
							<option value="BP_Arch">Arch</option>
							<option value="BP_Longitude">Longitude</option>
							<option value="BP_LongitudePinch">LongitudePinch</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Operation</td>
					<td>
						<select data-bind="value: dEdit.brushDetail.currentBrush().op">
							<option value="BO_Add">Add</option>
							<option value="BO_Subtract">Subtract</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Rotation</td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.psi"></input></td>
				</tr>
				<tr>
					<td>Scale<span class="dEdit_xyz">(x)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().scale[0]"></input></td>
				</tr>
				<tr>
					<td><span class="dEdit_xyz">(y)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().scale[1]"></input></td>
				</tr>
				<tr>
					<td><span class="dEdit_xyz">(z)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().scale[2]"></input></td>
				</tr>
				<tr>
					<td>Height</td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().height"></input></td>
				</tr>
				<tr>
					<td>Position<span class="dEdit_xyz">(x)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().position[0]"></input></td>
				</tr>
				<tr>
					<td><span class="dEdit_xyz">(y)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.currentBrush().position[1]"></input></td>
				</tr>
				<tr>
					<td><span class="dEdit_xyz">(z)</span></td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.brushDetail.z"></input></td>
				</tr>
				<tr>
					<td>Mirrored</td>
					<td><input type="checkbox" data-bind="checked: dEdit.brushDetail.orientationReversed"></input></td>
				</tr>
				<tr>
					<td>Pathable</td>
					<td><input type="checkbox" data-bind="checked: dEdit.brushDetail.currentBrush().pathable"></input></td>
				</tr>
				<tr>
					<td>Mergeable</td>
					<td><input type="checkbox" data-bind="checked: dEdit.brushDetail.currentBrush().mergeable"></input></td>
				</tr>
				<tr>
					<td>No Features</td>
					<td><input type="checkbox" data-bind="checked: dEdit.brushDetail.currentBrush().no_features"></input></td>
				</tr>
			</table>
			<div style="height:6px"></div>
			<table>
				<tr>
					<td style="text-align:right"><button data-bind="click: dEdit.brushDetail.selected.cloneAll">Clone</button></td>
					<td style="text-align:left"><button data-bind="click: dEdit.brushDetail.selected.removeAll">Delete</button></td>
				</tr>
				<tr>
					<td style="text-align:right"><button data-bind="click: dEdit.brushDetail.selected.shiftUpAll">Shift up</button></td>
					<td style="text-align:left"><button data-bind="click: dEdit.brushDetail.selected.shiftDownAll">Shift down</button></td>
				</tr>
				<tr data-bind="visible: dEdit.brushDetail.selected.brushes().length > 1">
					<td style="text-align:right"><button data-bind="click: dEdit.brushDetail.selected.joinUp">Join up</button></td>
					<td style="text-align:left"><button data-bind="click: dEdit.brushDetail.selected.joinDown">Join down</button></td>
				</tr>
			</table>
		</div>
		<div id="dEdit_brushDetailTab_functions">
			<div class="dEdit_note" data-bind="visible: dEdit.brushDetail.selected.brushes().length > 1">
				<span data-bind="text: dEdit.brushDetail.selected.brushes().length"></span> brushes selected. Functions will be applied to all selected brushes.
			</div>
			<span class="dEdit_warn" data-bind="visible: dEdit.currentBrushFunction.type().label === 'Rotate about axis'">Rotations aren't being set correctly right now. I'll fix that eventually.</span>
			<select data-bind="options: dEdit.brushFunctionsArray, optionsText: function(item) { return item.label; }, value: dEdit.currentBrushFunction.type">
			</select>
			<table>
				<tr data-bind="visible: dEdit.currentBrushFunction.type().activeFields.vector">
					<td>Vector</td>
					<td>
						<input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.vector[0]"></input>
						<input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.vector[1]"></input>
						<input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.vector[2]"></input>
					</td>
				</tr>
				<tr data-bind="visible: dEdit.currentBrushFunction.type().activeFields.relative">
					<td>Relative</td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.relative"></input></td>
				</tr>
				<tr data-bind="visible: dEdit.currentBrushFunction.type().activeFields.absolute">
					<td>Absolute</td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.absolute"></input></td>
				</tr>
				<tr data-bind="visible: dEdit.currentBrushFunction.type().activeFields.angle">
					<td>Angle</td>
					<td><input type="number" data-bind="valueUpdate: 'afterkeydown', value: dEdit.currentBrushFunction.angle"></input></td>
				</tr>
			</table>
			<table>
				<tr data-bind="visible: dEdit.currentBrushFunction.isValid">
					<td><button style="width: 100%" data-bind="click: dEdit.brushDetail.selected.applyFunctionToAll()">Apply</button></td>
					<td><button style="width: 100%" data-bind="click: dEdit.brushDetail.selected.cloneFunctionToAll()">Clone & Apply</button></td>
				</tr>
				<tr data-bind="visible: !dEdit.currentBrushFunction.isValid()">
					<td colspan="2" class="dEdit_note">
						The selected operation can be applied once all required fields are filled.
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>